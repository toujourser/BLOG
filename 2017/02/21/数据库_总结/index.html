<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="MySQL,">










<meta name="description" content="一、数据库的一些概念数据库的概念： 数据库指的是以一定方式储存在一起、能为多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。 数据库管理系统： 数据库管理系统（Database Management System，简称DBMS）是为管理数据库而设计的电脑软件系统，一般具有存储、截取、安全保障、备份等基础功能。例如:MySQL就是一个数据库管理系统。 关系数据库： 所谓的关系型数据库">
<meta name="keywords" content="MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库_总结">
<meta property="og:url" content="https://toujourser.github.io/blog/2017/02/21/数据库_总结/index.html">
<meta property="og:site_name" content="EchoDS">
<meta property="og:description" content="一、数据库的一些概念数据库的概念： 数据库指的是以一定方式储存在一起、能为多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。 数据库管理系统： 数据库管理系统（Database Management System，简称DBMS）是为管理数据库而设计的电脑软件系统，一般具有存储、截取、安全保障、备份等基础功能。例如:MySQL就是一个数据库管理系统。 关系数据库： 所谓的关系型数据库">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-12-28T16:11:30.880Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库_总结">
<meta name="twitter:description" content="一、数据库的一些概念数据库的概念： 数据库指的是以一定方式储存在一起、能为多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。 数据库管理系统： 数据库管理系统（Database Management System，简称DBMS）是为管理数据库而设计的电脑软件系统，一般具有存储、截取、安全保障、备份等基础功能。例如:MySQL就是一个数据库管理系统。 关系数据库： 所谓的关系型数据库">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://toujourser.github.io/blog/2017/02/21/数据库_总结/">





  <title>数据库_总结 | EchoDS</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/toujourser" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">EchoDS</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blog/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://toujourser.github.io/blog/blog/2017/02/21/数据库_总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MDS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EchoDS">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">数据库_总结</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-21T13:01:45+08:00">
                2017-02-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="一、数据库的一些概念"><a href="#一、数据库的一些概念" class="headerlink" title="一、数据库的一些概念"></a>一、数据库的一些概念</h2><p><strong>数据库的概念：</strong></p>
<p>数据库指的是以一定方式储存在一起、能为多个用户共享、具有尽可能小的冗余度、与应用程序彼此独立的数据集合。</p>
<p><strong>数据库管理系统：</strong></p>
<p>数据库管理系统（Database Management System，简称DBMS）是为管理数据库而设计的电脑软件系统，一般具有存储、截取、安全保障、备份等基础功能。例如:MySQL就是一个数据库管理系统。</p>
<p><strong>关系数据库：</strong></p>
<p>所谓的关系型数据库，是建立在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。</p>
<p>关系数据库管理系统的特点：</p>
<ul>
<li>数据以表格的形式出现;</li>
<li>每行为各种记录名称;</li>
<li>每列为记录名称所对应的数据域;</li>
<li>许多的行和列组成一张表单;</li>
<li>若干的表单组成 database;</li>
</ul>
<p><strong>关系模型的结构的一些概念：</strong></p>
<p><code>表的结构</code></p>
<ul>
<li><p>表</p>
<blockquote>
<p>关系模型的数据结构单一，采用二维表结构来表示实体和实体之间的关系，是一种按行与列排列的具有相关信息的逻辑组。一个关系对应一个二维表。一个数据库可以包含任意多个数据表。</p>
</blockquote>
</li>
<li><p>属性</p>
<blockquote>
<p>表中每一列（也称字段、数据项）描述实体集的某个特征，在关系数据库中被称为属性；每一个属性都有自己的取值范围，称为域。</p>
</blockquote>
</li>
<li><p>元组</p>
<blockquote>
<p>表中的每一行由一个实体的相关属性取值构成，称为元组，它相对完整地描述了一个实体。一个元组在关系数据库中也被称为一条记录。元组的一个属性值称为分量。</p>
</blockquote>
</li>
</ul>
<p><code>关键字</code></p>
<p>在一个关系模式中，关键字是保证表中记录具有唯一性的一种机制。</p>
<ul>
<li><p>候选关键字</p>
<blockquote>
<p>关系表中按应用语义能唯一标志元组的最小属性的集合。在最简单的情况下，候选关键字只包含一个属性。在最极端的情况下，关系模式的所有属性组是这个关系模式的候选关键字，称为全码。</p>
</blockquote>
</li>
<li><p>主关键字（主键）</p>
<blockquote>
<p>用户指定的用来在关系表中唯一标识元组的一个候选关键字。若一个关系有多个候选关键字，则只选定其中的一个为主关键字。主关键字的值不能为空、不能重复。</p>
</blockquote>
</li>
<li><p>外关键字 （外键）</p>
<blockquote>
<p>一个表中的主关键字与另一个表中与该主关键字相同的属性建立联系，这个起到联系作用的属性，称为另一个表的外关键字，简称外键。</p>
</blockquote>
</li>
</ul>
<p><code>关系模式</code></p>
<p>表中的行定义（即表头）是实体集相关属性的集合，称为该表的关系模式。关系模式就是对关系的描述，包括关系名、组成该关系的属性名、属性向域的映像。</p>
<p>关系模式通常记为：(属性名1,属性名2,…属性名n)，其中主关键字加下划线。</p>
<h2 id="二、关系数据库的基本操作"><a href="#二、关系数据库的基本操作" class="headerlink" title="二、关系数据库的基本操作"></a>二、关系数据库的基本操作</h2><p>关系数据库的基本操作包括：查、增、删、改。这些操作，我们可以通过一种语言去执行，这种语言就是 SQL （Structured Query Language），即结构化查询语言。</p>
<h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a><a href="https://jokeyang.github.io/2017/02/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/#SQL" title="SQL" target="_blank" rel="noopener"></a>SQL</h3><p>SQL 是一门 ANSI 的标准计算机语言，用来访问和操作数据库系统。SQL 语句用于取回和更新数据库中的数据。</p>
<p><code>数据操作语言 (DML)</code></p>
<p>SQL (结构化查询语言)是用于执行查询的语法。但是 SQL 语言也包含用于更新、插入和删除记录的语法。查询和更新指令构成了 SQL 的 DML 部分：</p>
<ul>
<li>SELECT - 从数据库表中获取数据</li>
<li>UPDATE - 更新数据库表中的数据</li>
<li>DELETE - 从数据库表中删除数据</li>
<li>INSERT INTO - 向数据库表中插入数据</li>
</ul>
<p><code>数据定义语言 (DDL)</code></p>
<p>SQL 的数据定义语言 (DDL) 部分使我们有能力创建或删除表格。我们也可以定义索引（键），规定表之间的链接，以及施加表间的约束。SQL 中最重要的 DDL 语句:</p>
<ul>
<li>CREATE DATABASE - 创建新数据库</li>
<li>ALTER DATABASE - 修改数据库</li>
<li>CREATE TABLE - 创建新表</li>
<li>ALTER TABLE - 变更（改变）数据库表</li>
<li>DROP TABLE - 删除表</li>
<li>CREATE INDEX - 创建索引（搜索键）</li>
<li>DROP INDEX - 删除索引</li>
</ul>
<h3 id="SQL指令"><a href="#SQL指令" class="headerlink" title="SQL指令"></a><a href="https://jokeyang.github.io/2017/02/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/#SQL%E6%8C%87%E4%BB%A4" title="SQL指令" target="_blank" rel="noopener"></a>SQL指令</h3><p><code>SELECT</code></p>
<p>SELECT 最常用的方式是将数据从数据库中的表中选出，即从 (FROM) 数据库中的表中选出 (SELECT)。(表格是一个数据库内的结构，它的目的是储存数据。)一个最基本的 SQL 架构如下所示：</p>
<blockquote>
<p>SELECT “列名” FROM “表名称”</p>
</blockquote>
<p>例如：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">Name</span> <span class="keyword">FROM</span> city;</span><br></pre></td></tr></table></figure></p>
<p>上述语句，会返回表 city 中的 Name 这一列的全部值。</p>
<p><code>DISTINCT</code></p>
<p>SELECT 指令让我们能够读取表中一个或数个列的所有数据，得到的数据的值可能会有重复。当我们需要找出表中的某列数据有哪些不同的值时，只要在 SELECT 后加上一个 DISTINCT 就可以了。也就是说 SELECT 会将符合条件的数据全都选出来，而 DISTINCT 会选择出这个表的列中那些 <strong>不同的值</strong>。即使每个值的出现多次，使用 DISTINCT 后会返回唯一不同的值。在 SQL 中，使用 DISTINCT 的语法如下：</p>
<blockquote>
<p>SELECT DISTINCT “列名” FROM “表名称”</p>
</blockquote>
<p>例如：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">Language</span> <span class="keyword">FROM</span> countrylanguage;</span><br></pre></td></tr></table></figure></p>
<p>上述语句，会返回表 countrylanguage 中的属性 Language 这一列在表中的不同的值。</p>
<p><code>WHERE</code></p>
<p>当我们需要选择性地从表中选取数据时，就需要用到 WHERE 这个指令。使用 WHERE 指令的语法如下：</p>
<blockquote>
<p>SELECT “列名称” FROM “表名称” WHERE “条件”（列 运算符 值）</p>
</blockquote>
<p>例如：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> <span class="keyword">Language</span> = <span class="string">"English"</span>;</span><br></pre></td></tr></table></figure></p>
<p>上述语句，会返回表 countrylanguage 中 Language 的值为 Enlish 的 CountryCode 的列。</p>
<p><code>AND OR</code></p>
<p>上面的指令都是基于一个条件对数据进行选择，当我们想通过复杂条件选择数据时，可以将多个简单条件连接成复杂条件。拿 WHERE 来说，AND 和 OR 可在 WHERE 子语句中把两个或多个条件结合起来。如果第一个条件和第二个条件都成立，则 AND 运算符显示一条记录。如果第一个条件和第二个条件中只要有一个成立，则 OR 运算符显示一条记录。使用 AND　OR 指令的语法如下：</p>
<blockquote>
<p>SELECT “列名” FROM “表名称” WHERE “简单条件” {[AND|OR] “简单条件”}+</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> <span class="keyword">Language</span> = English <span class="keyword">AND</span> IsOfficial = <span class="string">"T"</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 countrylanguage 中 Language 的值为 Enlish 且 IsOfficial 为 T 的列。</p>
<p><code>IN</code></p>
<p>IN 这个指令允许我们在 WHERE 子句中规定多个值。IN 指令的语法为下：</p>
<blockquote>
<p>SELECT “栏位名”　FROM “表名称”　WHERE “列名” IN (‘值一’, ‘值二’, …)</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> <span class="keyword">Language</span> <span class="keyword">IN</span> (<span class="string">"Enlish"</span>,<span class="string">"French"</span>);</span><br></pre></td></tr></table></figure>
<p>上述命令，会返回表　countrylanguage 中 Language 的值满足条件在　Enlish　和　French　这两个值中的列。</p>
<p><code>BETWEEN</code></p>
<p>BETWEEN 操作符在 WHERE 子句中使用，经常和　AND 连用。使用 BETWEEN … AND 选取介于两个值之间的数据范围。这些值可以是数值、文本或者日期。。BETWEEN　这个子句的语法如下：</p>
<blockquote>
<p>SELECT “列名”　FROM “表名称” WHERE “列名” BETWEEN ‘值一’ AND ‘值二’</p>
</blockquote>
<p>例如：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> Percentage <span class="keyword">BETWEEN</span> <span class="string">"10.0"</span> <span class="keyword">AND</span> <span class="string">"35.0"</span>;</span><br></pre></td></tr></table></figure></p>
<p>上述语句，会返回表　countrylanguage 中 Percentage 值在 10.0 到 35.0 之间的列。</p>
<p><code>LIKE</code></p>
<p>LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式(pattern)。对比之下，在使用 IN 指令的时候，我们完全地知道我们需要的<br>条件；在使用 BETWEEN 指令的时候，我们则是列出一个范围。使用 LIKE 指令的语法如下：</p>
<blockquote>
<p>SELECT “列名” FROM “表名称” WHERE “列名” LIKE {模式}</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> CountryCode <span class="keyword">LIKE</span> <span class="string">"%A%"</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表　countrylanguage 中 CountryCode 以A开头的列。LIKE　后的模式，通常是一个通配符。</p>
<p><code>ORDER BY</code></p>
<p>ORDER BY 语句用于根据指定的列对结果集进行排序,默认按照升序（ASC）对记录进行排序。如果希望按照降序对记录进行排序，可以使用 DESC 关键字。ORDER BY 的语法如下:</p>
<blockquote>
<p>SELECT “列名” FROM “表名称” [WHERE “条件”] ORDER BY “列名” [ASC, DESC]</p>
</blockquote>
<p>例如：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode,Percentage <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> Percentage <span class="keyword">BETWEEN</span> <span class="string">"25.0"</span> <span class="keyword">AND</span> <span class="string">"55.0"</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> Percentage <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表　countrylanguage 中包含 CountryCode 和 Percentage 的列，这些列按照 Percentage 的值降序排列，且满足 Percentage 值介于25.0和55.0之间。</p>
<p><code>函数</code></p>
<p>除了对数据的查询，我们有的时候可能会想对这些数据做一些运算，比如将它们总合起来，或是找出它们的平均值，而SQL　有提供一些这一类的函数。</p>
<ul>
<li>AVG (平均)</li>
<li>COUNT (计数)</li>
<li>MAX (最大值)</li>
<li>MIN (最小值)</li>
<li>SUM (总合)</li>
</ul>
<p>使用函数的语法是：</p>
<blockquote>
<p>SELECT “函数名”(“列名”) FROM “表名称”</p>
</blockquote>
<p>例一：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(Population) <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> CountryCode = <span class="string">"AFG"</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中 CountryCode 等于 AFG 的 Population 总合。</p>
<p>例二：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(CountryCode) <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> CountryCode = <span class="string">"NLD"</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中 CountryCode 等于 NLD 的个数。</p>
<p>例三：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> CountryCode) <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> CountryCode <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中 CountryCode 的个数。COUNT 和 DISTINCT 经常被合起来使用，目的是找出表中某列有多少不同的数值。</p>
<p>例四：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(Population) <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> CountryCode = <span class="string">"DZA"</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中 CountryCode 等于 DZA 的Population 的平均值。</p>
<p><code>GROUP BY</code></p>
<p>GROUP BY 语句用于结合合计函数 (比如 SUM)，根据一个或多个列对结果集进行分组。使用 GROUP BY 的语法为：</p>
<blockquote>
<p>SELECT “列名1”, SUM(“列名2”) FROM “表名称” GROUP BY “列名1”</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode,<span class="keyword">SUM</span>(Population) <span class="keyword">FROM</span> city <span class="keyword">GROUP</span> <span class="keyword">BY</span> CountryCode;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中 每个 CountryCode 对应的总人数，结果按照 CountryCode 进行分组。</p>
<p><code>HAVING</code></p>
<p>当我们想对函数产生的值来设定条件时，比如我们想知道那个 CountryCode 的总人数超过10000000，在这个情况下，我们不能使用 WHERE 的指令。这时，我们可以使用 HAVING 的指令，来达到这个目标。 需要注意的是 HAVING 子句通常是在一个 SQL 句子的最后；而且，一个含有 HAVING 子句的 SQL 并不一定要包含 GROUP BY 子句。使用 HAVING 的语法如下：</p>
<blockquote>
<p>SELECT “列名1”, SUM(“列名2”) FROM “表名称” GROUP BY “列名1” HAVING (函数条件)</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode,<span class="keyword">SUM</span>(Population) <span class="keyword">FROM</span> city <span class="keyword">GROUP</span> <span class="keyword">BY</span> CountryCode <span class="keyword">HAVING</span> <span class="keyword">SUM</span>(Population) &gt; <span class="string">"10000000"</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中 Population 总数大于10000000的结果，结果按照 CountryCode 进行分组。</p>
<p><code>ALIAS</code></p>
<p>在 SQL 语言中，可以通过 ALIAS 为列名称和表名称指定别名。最常用到的别名有两种：列别名及表别名。SQL　中使用列名和表别名的语法如下：</p>
<blockquote>
<p>SELECT “表别名”.”列名1” “列别名” FROM “表名称” “表别名”</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c1.District Area <span class="keyword">FROM</span> city c1 <span class="keyword">GROUP</span> <span class="keyword">BY</span> c1.District;</span><br></pre></td></tr></table></figure>
<p>上述语句，会返回表 city 中的 District 这一列。不同的是，返回的结果中 District 这一列有了别名 Area。</p>
<p><code>表连接</code></p>
<p>之前，我们都是在一张表中读取数据，操作相对比较简单。但实际情况下，我们经常需要从多个数据表中读取数据。在　SQL　中，JOIN 用于根据两个或多个表中的列之间的关系，从这些表中查询数据。</p>
<p>在 MySQL 中 JOIN 按照功能大致分为如下三类：</p>
<ul>
<li>INNER JOIN（内连接,或等值连接）：获取两个表中字段匹配关系的记录。</li>
<li>LEFT JOIN（左连接）：获取左表所有记录，即使右表没有对应匹配的记录。</li>
<li>RIGHT JOIN（右连接）： 与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</li>
</ul>
<p>要能进行多表查询，那么被查询的表之间必须要有联系，而数据库中的表可通过键将彼此联系起来。</p>
<blockquote>
<p>主键（Primary Key）是一个列，在这个列中的每一行的值都是唯一的。在表中，每个主键的值都是唯一的。这样做的目的是在不重复每个表中的所有数据的情况下，把表间的数据交叉捆绑在一起。</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	c1. <span class="keyword">NAME</span> CountryName,</span><br><span class="line">	c2. <span class="keyword">LANGUAGE</span> Country_Language</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	city c1</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> countrylanguage c2 <span class="keyword">ON</span> c1.CountryCode = c2.CountryCode</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	c1. <span class="keyword">NAME</span>;</span><br></pre></td></tr></table></figure>
<p><strong>注：</strong> INNER JOIN 与 JOIN 是相同的。</p>
<h3 id="表格处理"><a href="#表格处理" class="headerlink" title="表格处理"></a><a href="https://jokeyang.github.io/2017/02/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/#%E8%A1%A8%E6%A0%BC%E5%A4%84%E7%90%86" title="表格处理" target="_blank" rel="noopener"></a>表格处理</h3><p>前面我们基本都是在数据库管理系统中存在数据库的情况下，获取数据库中的数据。当然，我们也可以自己创建数据库，根据自己的需要建表存储数据。</p>
<p><code>CREATE DATABASE</code></p>
<p>在 SQL 中，使用 CREATE DATABASE 来创建数据库。使用的语法 CREATE DATABASE 语法如下：</p>
<blockquote>
<p>CREATE DATABASE database_name</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">store</span>;</span><br></pre></td></tr></table></figure>
<p>上述语句，创建了一个名叫 store 的数据库。</p>
<p><code>CREATE TABLE</code></p>
<p>创建好数据库，我们就需要建立表格来存储数据。使用 CREATE TABLE 的语法是：</p>
<blockquote>
<p>CREATE TABLE 表名称 ( 列名称1 数据类型, 列名称2 数据类型, 列名称3 数据类型, …. )</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">( <span class="keyword">Id</span> <span class="built_in">int</span>,</span><br><span class="line">  First_Name <span class="built_in">char</span>(<span class="number">50</span>),</span><br><span class="line">  Last_Name <span class="built_in">char</span>(<span class="number">50</span>),</span><br><span class="line">  Address <span class="built_in">char</span>(<span class="number">50</span>),</span><br><span class="line">  City <span class="built_in">char</span>(<span class="number">50</span>),</span><br><span class="line">  Country <span class="built_in">char</span>(<span class="number">25</span>),</span><br><span class="line">  Birth_Date <span class="built_in">date</span> );</span><br></pre></td></tr></table></figure>
<p>上述语句，创建了一个名叫 Customer 的表,并定义了表中存储数据。</p>
<p>在创建表时，我们需要对表中要存储的数据进行限制，常见的限制有以下几种：</p>
<ul>
<li>NOT NULL</li>
<li>UNIQUE</li>
<li>CHECK</li>
<li>Primary Key</li>
<li>Foreign Key</li>
</ul>
<p><code>NOT NULL</code></p>
<p>在没有做出任何限制的情况下，某一列的值是允许有 NULL 值的。如果我们不允许某一列的值含有 NULL 值，我们就需要对那个列做出 NOT NULL 的指定。</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">( <span class="keyword">SID</span> <span class="built_in">integer</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  Last_Name <span class="built_in">varchar</span> (<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  First_Name <span class="built_in">varchar</span>(<span class="number">30</span>));</span><br></pre></td></tr></table></figure>
<p>上述语句，”SID” 和 “Last_Name” 这两列不允许有 NULL 值，而 “First_Name” 这一列是可以有 NULL 值的。</p>
<p><code>UNIQUE</code></p>
<p>UNIQUE 限制是保证一个栏位中的所有资料都是有不一样的值。</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">( <span class="keyword">SID</span> <span class="built_in">integer</span> <span class="keyword">Unique</span>,</span><br><span class="line">  Last_Name <span class="built_in">varchar</span> (<span class="number">30</span>),</span><br><span class="line">  First_Name <span class="built_in">varchar</span>(<span class="number">30</span>));</span><br></pre></td></tr></table></figure>
<p>上述语句，”SID” 这列不能有重复值存在，而 “Last_Name” 及 “First_Name” 这两列则是允许有重复值存在。</p>
<blockquote>
<p><strong>注意：</strong><br>一个被指定为主键的列也一定会含有 UNIQUE 的特性。相对来说，一个UNIQUE 的列并不一定会是一个主键。</p>
</blockquote>
<p><code>CHECK</code></p>
<p>CHECK 约束用于限制列中的值的范围。如果对单个列定义 CHECK 约束，那么该列只允许特定的值。如果对一个表定义 CHECK 约束，那么此约束会在特定的列中对值进行限制。</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">( <span class="keyword">SID</span> <span class="built_in">integer</span> <span class="keyword">CHECK</span> (<span class="keyword">SID</span> &gt; <span class="number">0</span>),</span><br><span class="line">  Last_Name <span class="built_in">varchar</span> (<span class="number">30</span>),</span><br><span class="line">  First_Name <span class="built_in">varchar</span>(<span class="number">30</span>));</span><br></pre></td></tr></table></figure>
<p>上述语句，”SID” 这列的值只能包含大于 0 的整数。</p>
<blockquote>
<p><strong>注意：</strong><br>CHECK 限制目前尚未被执行于 MySQL 数据库上。</p>
</blockquote>
<p><code>Primary Key</code></p>
<p>主键（Primary Key）在前面已经多次提到了，它是一个列，在这个列中的每一行的值都是唯一的。在表中，每个主键的值都是唯一的。这样做的目的是在不重复每个表中的所有数据的情况下，把表间的数据交叉捆绑在一起。主键可以是表中的一个列，或是一个人造列 (与表没有关系的列)。主键可以包含一或多个列。当主键包含多列时，称为组合键 (Composite Key)。</p>
<p>主键可以在创建新表时设定 (使用 CREATE TABLE 语句)，或是以改变现有表架构的方式设定 (使用 ALTER TABLE)。例如，MySQL 中指定 Primary Key：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customer</span><br><span class="line">( <span class="keyword">SID</span> <span class="built_in">integer</span>,</span><br><span class="line">  Last_Name <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line">  First_Name <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">SID</span>));</span><br></pre></td></tr></table></figure>
<p>或者是改变现有表架构的方式设定：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Customer <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="keyword">SID</span>);</span><br></pre></td></tr></table></figure>
<p><code>Foreign Key</code></p>
<p>外键（Foreign Key）是一个(或数个)指向另外一个表格主键的列。外键的目的是确定资料的参考完整性(referential integrity)。也就是说，只有被准许的资料值才会被存入数据库内。</p>
<p>例如，MySQL 中设置 Foreign Key：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ORDERS</span><br><span class="line">( Order_ID <span class="built_in">integer</span>,</span><br><span class="line">  Order_Date <span class="built_in">date</span>,</span><br><span class="line">  Customer_SID <span class="built_in">integer</span>,</span><br><span class="line">  Amount <span class="keyword">double</span>,</span><br><span class="line">  Primary <span class="keyword">Key</span> (Order_ID),</span><br><span class="line">  <span class="keyword">Foreign</span> <span class="keyword">Key</span> (Customer_SID) <span class="keyword">references</span> CUSTOMER(<span class="keyword">SID</span>));</span><br></pre></td></tr></table></figure>
<p>同样的，在建好表之后，我们依然可以通过改变现有表架构的方式设定外键：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> ORDERS <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (customer_sid) <span class="keyword">REFERENCES</span> CUSTOMER(<span class="keyword">sid</span>);</span><br></pre></td></tr></table></figure>
<p><code>CREATE VIEW</code></p>
<p>在 SQL 中，视图是基于 SQL 语句的结果集的可视化的表。视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段。我们可以向视图添加 SQL 函数、WHERE 以及 JOIN 语句，我们也可以提交数据，就像这些来自于某个单一的表。SQL中，建立一个视图的语法如下：</p>
<blockquote>
<p>CREATE VIEW view_name AS SELECT column_name(s) FROM table_name WHERE condition</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> New_City <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="keyword">Name</span>,District,Population <span class="keyword">FROM</span> city;</span><br></pre></td></tr></table></figure>
<p>这样，我们就有了一个名为 New_City 的视图。当然，我们可以从视图中获取数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> New_City;</span><br></pre></td></tr></table></figure>
<p><code>CREATE INDEX</code></p>
<p>INDEX （索引）是由一个表中的一列或者若干列的值与其对应的记录在数据表中地址所组成。用户无法看到索引，它们只能被用来加速搜索/查询。</p>
<p>数据库中一个表的存储由两部分组成：数据页面和索引页面。</p>
<p>创建索引的目的是为了改善查询性能、加快依据索引字段对表中数据行的检索、强制保持表的数据唯一性等。</p>
<p>索引虽然能改善查询性能，但也耗费了磁盘空间，并且当对数据表进行数据增加、修改或删除时，系统需要花费一些时间来维护索引，所以通常不在一个表上建立太多索引，也不建立不常使用的索引。</p>
<p>一般来说，需要在下面这些地方建立索引：</p>
<ul>
<li>在主键和外键上创建索引</li>
<li>在检索频繁的字段建立索引</li>
<li>在经常需要排序的字段上建立索引</li>
</ul>
<p>在 SQL　中，建立索引的语法如下：</p>
<blockquote>
<p>CREATE INDEX “INDEX_NAME” ON “TABLE_NAME” (COLUMN_NAME)</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> IDX_POPULATION <span class="keyword">ON</span> city (Population);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong><br>索引的命名并没有一个固定的方式。通常会用的方式是在名称前加一个字首，例如”IDX_” ，来避免与数据库中的其他物件混淆。另外，在索引名之内包括表名及列名也是一个好的方式。</p>
</blockquote>
<p><code>ALTER TABLE</code></p>
<p>在表被建立在数据库中后，我们常常会发现，这个表的结构需要有所改变。比如，增加一列、删去一列、改变列名称、改变列的数据类型。在 SQL 中， ALTER TABLE 语句用于在已有的表中添加、修改或删除列。使用 ALTER TABLE 的语法如下：</p>
<blockquote>
<p>ALTER TABLE “table_name” [ 改变方式 ]</p>
</blockquote>
<p>[ 改变方式 ] 的详细写法会依我们想要达到的目标而有所不同。比如，增加一列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> city <span class="keyword">ADD</span> Country <span class="built_in">char</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>删除一列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> city <span class="keyword">Drop</span> Country;</span><br></pre></td></tr></table></figure>
<p>改变列的类型：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> city <span class="keyword">Modify</span> Country <span class="built_in">char</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<p><code>DROP</code></p>
<p>通过使用 DROP 语句，可以轻松地删除索引、表和数据库。</p>
<p>例如，删除一个表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> city;</span><br></pre></td></tr></table></figure>
<p>或者是删除一个索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> IDX_POPULATION;</span><br></pre></td></tr></table></figure>
<p><code>TRUNCATE TABLE</code></p>
<p>使用 DROP　TABLE　指令会删除表和表中的数据。而使用　TRUNCATE TABLE 的指令，表中的数据会完全消失，可是表本身会继续存在。 TRUNCATE TABLE 的语法为下：</p>
<blockquote>
<p>TRUNCATE TABLE “表格名”</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> city;</span><br></pre></td></tr></table></figure>
<p><code>INSERT INTO</code></p>
<p>到目前为止，我们都是操作如何把数据从表中取出。那么，怎么往表中添加数据呢？在 SQL 中，我们可以通过 INSERT INTO 向表中添加数据。使用 INSERT INTO 的语法如下：</p>
<blockquote>
<p>INSERT INTO “表格名” (“列1”, “列2”, …) VALUES (“值1”, “值2”, …)</p>
</blockquote>
<p>或者,将其它表中的数据作为值：</p>
<blockquote>
<p>INSERT INTO “表格1” (“栏位1”, “栏位2”, …) SELECT “栏位3”, “栏位4”, … FROM “表格2”;</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> city (<span class="keyword">Name</span>,CountryCode,District,Population) <span class="keyword">VALUES</span> (<span class="string">"NanJing"</span>,<span class="string">"CHN"</span>,<span class="string">"JiangSu"</span>,<span class="number">82302000</span>);</span><br></pre></td></tr></table></figure>
<p><code>UPDATE</code></p>
<p>我们有时候可能会需要修改表格中的数据。在这个时候，我们就需要用到 UPDATE 指令。这个指令的语法是：</p>
<blockquote>
<p>UPDATE “表名” SET “列名1” = [新值] WHERE {条件}</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> city <span class="keyword">SET</span> Population = <span class="string">"1880000"</span> <span class="keyword">WHERE</span> <span class="keyword">Name</span> = <span class="string">"Kabul"</span> <span class="keyword">AND</span> CountryCode = <span class="string">"AFG"</span>;</span><br></pre></td></tr></table></figure>
<p><code>DELETE FROM</code></p>
<p>在某些情况下，我们会需要直接从数据库中去除一些数据。在 SQL 可以通过 DELETE FROM 指令来完成。它的语法是：</p>
<blockquote>
<p>DELETE FROM “表格名” WHERE {条件}</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> <span class="keyword">Name</span> = <span class="string">"MaiJi"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="进阶SQL"><a href="#进阶SQL" class="headerlink" title="进阶SQL"></a><a href="https://jokeyang.github.io/2017/02/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/#%E8%BF%9B%E9%98%B6SQL" title="进阶SQL" target="_blank" rel="noopener"></a>进阶SQL</h3><p><code>UNION</code></p>
<p>UNION 操作符用于合并两个或多个 SELECT 语句的结果集。UNION 的语法如下：</p>
<blockquote>
<p>[SQL 语句 1] UNION [SQL 语句 2]</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> city <span class="keyword">UNION</span> <span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage;</span><br></pre></td></tr></table></figure>
<p><code>UNION ALL</code></p>
<p>UNION ALL 这个指令的目的也是要将两个 SQL 语句的结果合并在一起。 UNION ALL 和 UNION 不同之处在于 UNION ALL 会将每一笔符合条件的数据都列出来，无论资料值有无重复。UNION ALL 的语法如下：</p>
<blockquote>
<p>[SQL 语句 1] UNION ALL [SQL 语句 2]</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> city <span class="keyword">UNION</span> ALL <span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage;</span><br></pre></td></tr></table></figure>
<p><code>INTERSECT</code></p>
<p>和 UNION 指令类似，INTERSECT 也是对两个 SQL 语句所产生的结果做处理的。不同的地方是，UNION 是对结果做并集，而 INTERSECT 是交集。INTERSECT 的语法如下：</p>
<blockquote>
<p>[SQL 语句 1] INTERSECT [SQL 语句 2]</p>
</blockquote>
<p><strong>注：</strong> MySQL 中无此用法</p>
<p><code>MINUS</code></p>
<p>MINUS 指令是运用在两个 SQL 语句上。它先找出第一个 SQL 语句所产生的结果，然后看这些结果有没有在第二个 SQL 语句的结果中。如果有的话，那这一笔数据就被去除，而不会在最后的结果中出现。如果第二个 SQL 语句所产生的结果并没有存在于第一个 SQL语句所产生的结果内，那这笔数据就被抛弃。MINUS，也就是差集。使用 MINUS 的语法如下：</p>
<blockquote>
<p>[SQL 语句 1] MINUS [SQL 语句 2]</p>
</blockquote>
<p><strong>注：</strong> MySQL 中无此用法</p>
<p><code>子查询</code></p>
<p>我们可以在一个 SQL 语句中放入另一个 SQL 语句。当我们在 WHERE 子句或 HAVING 子句中插入另一个 SQL 语句时，我们就有一个子查询 (subquery) 的架构。 子查询的作用是什么呢？第一，它可以被用来连接表。另外，有的时候子查询是唯一能够连接两个表格的方式。子查询的语法如下：</p>
<blockquote>
<p>SELECT “栏位1” FROM “表格” WHERE “栏位2” [ 比较运算素 ]<br>(SELECT “栏位1” FROM “表格” WHERE [ 条件 ])</p>
</blockquote>
<p>[ 比较运算素 ] 可以是相等的运算素，例如 =, &gt;, &lt;, &gt;=, &lt;=. 这也可以是一个对文字的运算素，例如 “LIKE”。绿色的部分代表外查询，红色的部分代表内查询。</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(Population) <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> CountryCode <span class="keyword">IN</span> (<span class="keyword">SELECT</span> CountryCode <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> <span class="keyword">Language</span> = <span class="string">"French"</span>);</span><br></pre></td></tr></table></figure>
<p><code>EXISTS</code></p>
<p>上面的子查询中，我们用 IN 来连接内查询和外查询,而 EXISTS 也是这样一种方式。在 SQL 中 EXISTS 是用来测试内查询有没有产生任何结果。如果有的话，系统就会执行外查询中的 SQL。若是没有的话，那整个 SQL 语句就不会产生任何结果。EXISTS 的语法是：</p>
<blockquote>
<p>SELECT “栏位1” FROM “表格1” WHERE EXISTS (SELECT *<br>FROM “表格2” WHERE [条件])</p>
</blockquote>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(Population) <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> countrylanguage <span class="keyword">WHERE</span> <span class="keyword">Language</span> = <span class="string">"French"</span>);</span><br></pre></td></tr></table></figure>
<p><code>CASE</code></p>
<p>CASE 是 SQL 用来做为 if-then-else 之类逻辑的关键字。 CASE 的语法如下：</p>
<blockquote>
<p>SELECT CASE (“栏位名”) WHEN “条件1” THEN “结果1” WHEN “条件2” THEN “结果2” … [ELSE “结果N”] END FROM “表格名”</p>
</blockquote>
<p><strong>注意：</strong> “条件” 可以是一个数值或是公式。 ELSE 子句则并不是必须的。</p>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span>,<span class="keyword">CASE</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">'NanJing'</span> <span class="keyword">THEN</span></span><br><span class="line">	Population * <span class="number">0.9</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="string">'TianShui'</span> <span class="keyword">THEN</span></span><br><span class="line">	Population * <span class="number">1.1</span></span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line">	Population</span><br><span class="line"><span class="keyword">END</span> <span class="string">"New Population"</span></span><br><span class="line"><span class="keyword">FROM</span> city;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong> 练习 SQL 语句的数据库结构及数据 <a href="http://ogcpvdyqb.bkt.clouddn.com/world.sql?attname=" target="_blank" rel="noopener">在这里</a>。数据库管理系统使用的是 MySQL。</p>
</blockquote>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/MySQL/" <i="" class="fa fa-tag"> MySQL</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2017/02/17/Python-内建数据类型/" rel="next" title="python-内建数据类型">
                <i class="fa fa-chevron-left"></i> python-内建数据类型
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2017/03/10/format方法/" rel="prev" title="format方法">
                format方法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">MDS</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">39</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、数据库的一些概念"><span class="nav-number">1.</span> <span class="nav-text">一、数据库的一些概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、关系数据库的基本操作"><span class="nav-number">2.</span> <span class="nav-text">二、关系数据库的基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL"><span class="nav-number">2.1.</span> <span class="nav-text">SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL指令"><span class="nav-number">2.2.</span> <span class="nav-text">SQL指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表格处理"><span class="nav-number">2.3.</span> <span class="nav-text">表格处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进阶SQL"><span class="nav-number">2.4.</span> <span class="nav-text">进阶SQL</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MDS</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>








<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共44.6k字</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
